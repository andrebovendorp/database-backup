# Database Backup System Configuration
# Copy this file to config.yaml and configure your databases
# 
# IMPORTANT: Ensure database tools are installed:
# - PostgreSQL: https://www.postgresql.org/download/windows/ (Windows)
# - MongoDB Tools: https://www.mongodb.com/docs/database-tools/ (All platforms)
# 
# The system will automatically detect tools in common installation paths

# ============================================================================
# SOURCES - Database connections to backup
# ============================================================================
sources:
  # Multiple PostgreSQL Databases
  pgsql:
    - id: pgsql-01
      host: localhost
      port: 5432
      database: database
      username: myusername
      password: mysecretpassword
    - id: pgsql-02
      host: localhost
      port: 5432
      database: testdb
      username: testuser
      password: testpass
    - id: pgsql-03
      host: remote-server.com
      port: 5432
      database: production
      username: produser
      password: prodpass

  # Multiple MongoDB Databases
  mongodb:
    - id: mongo-01
      host: localhost
      port: 27017
      database: database
      uri: mongodb://localhost:27017/database
    - id: mongo-02
      host: localhost
      port: 27017
      database: testdb
      uri: mongodb://localhost:27017/testdb
    - id: mongo-03
      host: mongo-cluster.com
      port: 27017
      database: production
      uri: mongodb://user:pass@mongo-cluster.com:27017/production

# ============================================================================
# TARGETS - Backup storage destinations
# ============================================================================
targets:
  # FTP Configuration (optional)
  ftp:
    enabled: true                     # Enable/disable FTP uploads
    host: storage.example.com
    port: 21
    username: backup_user
    password: your_ftp_password
    remote_dir: /backup/db-backups
    ssl: false

  # S3 Configuration (optional) - supports AWS S3, MinIO, DigitalOcean Spaces, etc.
  s3:
    enabled: false                    # Enable/disable S3 uploads
    bucket: my-backup-bucket          # S3 bucket name
    region: us-east-1                 # AWS region (e.g., us-east-1, eu-west-1)
    access_key: YOUR_ACCESS_KEY       # AWS access key ID or S3-compatible access key
    secret_key: YOUR_SECRET_KEY       # AWS secret access key or S3-compatible secret key
    # endpoint_url: https://nyc3.digitaloceanspaces.com  # For S3-compatible services (MinIO, DigitalOcean Spaces, etc.)
    # path_prefix: db-backups/        # Optional: prefix for organizing backups in bucket (e.g., "backups/databases/")
    
    # Examples for different S3-compatible services:
    # - AWS S3: Just set bucket, region, access_key, and secret_key
    # - MinIO: Set endpoint_url to your MinIO server (e.g., http://localhost:9000)
    # - DigitalOcean Spaces: Set endpoint_url (e.g., https://nyc3.digitaloceanspaces.com)
    # - Backblaze B2: Set endpoint_url (e.g., https://s3.us-west-000.backblazeb2.com)

# ============================================================================
# NOTIFICATIONS - Alert systems for backup status
# ============================================================================
notifications:
  # Telegram Configuration (optional)
  telegram:
    enabled: true
    bot_token: your_bot_token
    chat_id: your_chat_id
  
  # Future notification options can be added here:
  # email:
  #   enabled: false
  #   smtp_host: smtp.example.com
  #   from: backups@example.com
  #   to: admin@example.com
  # slack:
  #   enabled: false
  #   webhook_url: https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Backup Configuration
backup:
  directory: ./backups              # Backup storage directory (relative or absolute path)
  retention_days: 7                 # Keep backups for 7 days before cleanup
  compression: true                 # Use gzip compression (recommended)
  log_level: INFO                   # Logging level: DEBUG, INFO, WARNING, ERROR
  verbose: false                    # Enable verbose output (can also use --verbose flag)

# ============================================================================
# Alternative format (for backward compatibility) - DEPRECATED
# Use the sources/targets/notifications format above instead
# ============================================================================
# Old format (still supported but deprecated):
# pgsql:
#   - host: localhost
#     port: 5432
#     database: database
#     username: myusername
#     password: mysecretpassword
#
# mongodb:
#   - host: localhost
#     port: 27017
#     database: database
#     uri: mongodb://localhost:27017/database
#
# ftp:
#   host: storage.example.com
#   port: 21
#   username: backup_user
#   password: your_ftp_password
#   remote_dir: /backup/db-backups
#   ssl: false
#
# telegram:
#   bot_token: your_bot_token
#   chat_id: your_chat_id
#   enabled: true
